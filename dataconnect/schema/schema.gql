type Host @table {
  # id: UUID! @default(expr: "uuidV4()")
  name: String! @index
  email: String! @unique
  userId: String @unique
}

type Guest @table {
  # id: UUID! @default(expr: "uuidV4()")
  name: String! @index
  email: String! @unique
  phone: String @index
  userId: String @index
}

type Party @table {
  # id: UUID! @default(expr: "uuidV4()")
  userId: String! @index
  title: String! @index
  details: String! @col(dataType: "varchar(2048)")
  scheduledFor: Date! @index
  state: String! @default(value: "draft") @index
}

type Invite @table {
  # id: UUID! @default(expr: "uuidV4()")
  guest: Guest! @index
  party: Party! @index
  state: String! @default(value: "pending") @index
}

type Channel @table {
  # id: UUID! @default(expr: "uuidV4()")
  name: String!
  description: String! @col(dataType: "varchar(2048)")
  scheduledFor: Date!
  type: String! @default(value: "chat")
}

type ChannelMembership @table {
  # id: UUID! @default(expr: "uuidV4()")
  invite: Invite!
  channel: Channel!
}

type ChannelMessage @table {
  # id: UUID! @default(expr: "uuidV4()")
  channel: Channel! @index
  content: String!
  timestamp: Date! @default(expr: "request.time") @index
}

type UserDevice @table {
  # id: UUID! @default(expr: "uuidV4()")
  userId: String! @index
  token: String! @unique # The FCM registration token
  platform: String! # e.g. "android", "ios", "web"
  updatedAt: Date! @default(expr: "request.time")
}